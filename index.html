<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Examen Desarrollo Web</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
  background: radial-gradient(circle at top, #5d8dcd, #3a4c65);
  font-family: "Segoe UI", sans-serif;
  color: #e6f1ff;
}

h1, h2, h5 {
  color: #6fe28f;
  letter-spacing: 2px;
}

.timer {
  font-size: 1.3rem;
  color: #7cf3ff;
}

.card {
  background: rgba(10, 30, 60, 0.9);
  border: 1px solid #1f5f9f;
  border-radius: 16px;
  box-shadow: 0 0 20px rgba(77, 252, 255, 0.15);
}

.option label {
  color: #cfd8dc;
  font-size: 1.05rem;
  cursor: pointer;
  transition: color 0.3s ease;
}

.option label:hover {
  color: #64ffda;
}

.correct {
  color: #00e676 !important;
  font-weight: bold;
  text-shadow: 0 0 6px rgba(0, 230, 118, 0.6);
}

.incorrect {
  color: #ff5252 !important;
  font-weight: bold;
  text-shadow: 0 0 6px rgba(255, 82, 82, 0.6);
}

.disabled {
  pointer-events: none;
  opacity: 0.7;
}

.btn-halo {
  background: linear-gradient(135deg, #1fd1ff, #0b6cff);
  border: none;
  color: #001a33;
  font-weight: bold;
}

.btn-halo:hover {
  background: linear-gradient(135deg, #4dfcff, #1fd1ff);
}
</style>
</head>

<body>

<!-- PANTALLA DE ACCESO -->
<div id="acceso" class="container py-5 text-center">
  <h2>Ingrese la palabra clave para acceder al examen</h2>
  <input type="password" id="clave" class="form-control w-50 mx-auto mt-3" placeholder="Palabra clave">
  <button class="btn btn-halo mt-3" onclick="verificarClave()">Ingresar</button>
  <p id="errorClave" class="text-danger mt-2"></p>
</div>

<!-- CONTENIDO DEL EXAMEN -->
<div id="contenidoExamen" style="display:none;">

<div class="container py-5">

  <div class="text-center mb-4">
    <h1>EXAMEN DE DESARROLLO WEB</h1>
    <p class="timer">Tiempo restante: <span id="time">20:00</span></p>
  </div>

  <form id="quizForm"></form>

  <div class="text-center mt-4">
    <button class="btn btn-halo btn-lg" onclick="finalizarQuiz()" type="button">
      Finalizar examen
    </button>
  </div>

  <div id="resultado" class="text-center mt-5"></div>

</div>
</div>

<script>

/* ====== VERIFICAR CLAVE ====== */
function verificarClave() {
  const claveCorrecta = "acceso123";
  const claveIngresada = document.getElementById("clave").value;

  if (claveIngresada === claveCorrecta) {
    document.getElementById("acceso").style.display = "none";
    document.getElementById("contenidoExamen").style.display = "block";
    iniciarExamen();
  } else {
    document.getElementById("errorClave").textContent = "Palabra clave incorrecta";
  }
}

/* ====== BANCO DE PREGUNTAS ====== */
const preguntasBanco = [
  { p: "¿Qué lenguaje estructura una página web?", r: ["HTML","CSS","JavaScript"], c: 0 },
  { p: "¿Qué propiedad CSS cambia el tamaño del texto?", r: ["font-size","display","float"], c: 0 },
  { p: "¿Qué framework es para diseño responsivo?", r: ["React","Bootstrap","Angular"], c: 1 },
  { p: "¿Para qué sirve JavaScript?", r: ["Estilos","Interactividad","Base de datos"], c: 1 },
  { p: "¿Qué significa CSS?", r: ["Creative Style","Cascading Style Sheets","Control Style System"], c: 1 },
  { p: "¿Qué propiedad centra con flexbox?", r: ["align-items","position","float"], c: 0 },
  { p: "¿Qué meta hace responsive?", r: ["viewport","charset","lang"], c: 0 },
  { p: "¿Qué método imprime en consola?", r: ["alert()","console.log()","print()"], c: 1 },
  { p: "¿Qué unidad es relativa al viewport?", r: ["px","vh","cm"], c: 1 },
  { p: "¿Qué hace object-fit: cover?", r: ["Deforma","Recorta proporcional","Estira"], c: 1 }
];

let preguntas = [];
let tiempo;
let timer;

/* ====== INICIAR EXAMEN ====== */
function iniciarExamen() {

  preguntas = preguntasBanco
    .sort(() => 0.5 - Math.random())
    .slice(0, 10);

  const quizForm = document.getElementById("quizForm");
  quizForm.innerHTML = "";

  preguntas.forEach((q, i) => {
    let opciones = "";
    q.r.forEach((op, j) => {
      opciones += `
        <div class="form-check option">
          <input class="form-check-input" type="radio" name="q${i}" value="${j}">
          <label class="form-check-label">${op}</label>
        </div>
      `;
    });

    quizForm.innerHTML += `
      <div class="card mb-4 p-4">
        <h5>${i+1}. ${q.p}</h5>
        ${opciones}
      </div>
    `;
  });

  iniciarTimer();
}

/* ====== TEMPORIZADOR ====== */
function iniciarTimer() {
  tiempo = 20 * 60;
  const timeDisplay = document.getElementById("time");

  timer = setInterval(() => {
    let m = Math.floor(tiempo / 60);
    let s = tiempo % 60;
    timeDisplay.textContent = `${m}:${s < 10 ? "0" : ""}${s}`;
    tiempo--;

    if (tiempo < 0) {
      clearInterval(timer);
      finalizarQuiz(true);
    }
  }, 1000);
}

/* ====== FINALIZAR ====== */
function finalizarQuiz(auto = false) {
  clearInterval(timer);

  let puntos = 0;

  preguntas.forEach((q, i) => {
    const radios = document.querySelectorAll(`input[name="q${i}"]`);
    radios.forEach((r, idx) => {
      const label = r.nextElementSibling;
      if (idx === q.c) label.classList.add("correct");
      if (r.checked && idx !== q.c) label.classList.add("incorrect");
      if (r.checked && idx === q.c) puntos++;
    });
  });

  document.getElementById("quizForm").classList.add("disabled");

  let calificacion = Math.round((puntos / preguntas.length) * 100);

  document.getElementById("resultado").innerHTML = `
    <h2>RESULTADO FINAL</h2>
    <p>Aciertos: ${puntos} / ${preguntas.length}</p>
    <h3>Calificación: ${calificacion}</h3>
    ${auto ? "<p class='text-warning'>Tiempo agotado</p>" : ""}
  `;
}

</script>

</body>
</html>
